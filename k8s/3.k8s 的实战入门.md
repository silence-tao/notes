# 1.Namespace

## 1.1 概述

Namespace 是 kubernetes 系统中一种非常重要的资源，它的主要作用是用来实现 `多套系统的资源隔离 `或者 `多租户的资源隔离`。

默认情况下，kubernetes 集群中的所有 Pod 都是可以相互访问的。但是在实际中，可能不想让两个 Pod 之间进行互相的访问，那么此时就可以将两个 Pod 划分到不同的 Namespace 下。kubernetes 通过将集群内部的资源分配到不同的 Namespace 中，可以形成逻辑上的“组”，以方便不同的组的资源进行隔离使用和管理。

可以通过 kubernetes 的授权机制，将不同的 Namespace 交给不同租户进行管理，这样就实现了多租户的资源隔离。此时还能结合 kubernetes 的资源配额机制，限定不同租户能占用的资源，例如 CPU 使用量、内存使用量等等，来实现租户可用资源的管理。

![image-202106040055006666.png](../img/image-202106040055006666.png)

kubernetes 在集群启动之后，会默认创建几个 namespace：

```bash
$ kubectl get namespace
```

> - default：所有未指定的 Namespace 的对象都会被分配在 default 命名空间。
>
> - kube-node-lease：集群节点之间的心跳维护，v1.13 开始引入。
>
> - kube-public：此命名空间的资源可以被所有人访问（包括未认证用户）。
>
> - kube-system：所有由 kubernetes 系统创建的资源都处于这个命名空间。

## 1.2 应用示例

1.示例：查看所有的命名空间

```bash
$ kubectl get namespace

# 简写形式
$ kubectl get ns
```

2.示例：查看指定的命名空间

```bash
$ kubectl get namespace default

# 简写形式
$ kubectl get ns default
```

3.示例：指定命名空间的输出格式

表格形式

```bash
$ kubectl get ns default -o wide
```

json 格式

```bash
$ kubectl get ns default -o json
```

yaml 格式

```bash
$ kubectl get ns default -o yaml
```

4.示例：查看命名空间的详情

```bash
$ kubectl describe namespace default

# 简写形式
$ kubectl describe ns default
```

![image-2021060400108006666.png](../img/image-2021060400108006666.png)

5.示例：创建命名空间

```bash
$ kubectl create namespace dev

# 简写形式
$ kubectl create ns dev
```

6.示例：删除命名空间

```bash
$ kubectl delete ns dev
```

7.示例：命令式对象配置

①新建ns-dev.yaml：

```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: dev
```

②通过命令式对象配置进行创建：

```bash
$ kubectl create -f ns-dev.yaml
```

③通过命令式对象配置进行删除：

```bash
$ kubectl delete -f ns-dev.yaml
```

